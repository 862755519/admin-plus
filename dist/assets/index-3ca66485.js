import{_ as F,a as L,b as U,r as I,d as _,w as D,e as N,f as M,g as n,c as A,h as t,i as T,j as s,k as j,l as e,v as S,o as B,m as p,t as K,p as G,n as H}from"./index-cb0cb9c3.js";const i=m=>(G("data-v-7a457451"),m=m(),H(),m),J={class:"login-container"},O={class:"login-card"},P=i(()=>t("div",{class:"login-title"},"欢迎登录",-1)),Q=i(()=>t("div",{class:"login-text"},"企业级中台管理系统",-1)),W={class:"form-row"},X=i(()=>t("div",null,"没有账号？",-1)),Y={class:"logi-type"},Z={class:"type-item"},$=i(()=>t("div",null,"微信",-1)),ee={class:"type-item"},oe=i(()=>t("div",null,"微信",-1)),te={class:"type-item"},se=i(()=>t("div",null,"微信",-1)),le={__name:"index",setup(m){const g=L(),C=U(),r=I({username:"admin",password:"123456"}),w=_(null),v=_(!1),b=I({username:[{required:!0,trigger:"blur",validator:(l,o,a)=>{o?a():a(new Error("请输入用户名"))}}],password:[{required:!0,trigger:"blur",validator:(l,o,a)=>{o?a():a(new Error("请输入密码"))}}]}),h=_(!1),d=_(!1),y=_(null),x=l=>{l.keyCode==13&&V()},V=()=>{w.value.validate(l=>{if(l)d.value=!0,C.login(r).then(o=>{o.code==200?(S.Message.success("登录成功正在跳转"),setTimeout(()=>{d.value=!1,v.value=!1,g.push({path:y.value||"/"})},300)):(S.Message.error("登录失败"),v.value=!0)}).catch(()=>{});else return d.value=!1,!1})};return D(()=>g.currentRoute.value,l=>{y.value=l.query&&l.query.redirect},{immediate:!0,deep:!0}),N(()=>{window.addEventListener("keydown",x)}),M(()=>{window.removeEventListener("keydown",x,!1)}),(l,o)=>{const a=n("Alert"),k=n("Input"),u=n("FormItem"),q=n("Checkbox"),z=n("Button"),E=n("Divider"),f=n("SvgIcon"),R=n("Form");return B(),A("div",J,[t("div",O,[P,Q,v.value?(B(),T(a,{key:0,type:"error","show-icon":"",style:{"margin-top":"20px","text-align":"left"}},{desc:s(()=>[p(" 系统登录失败请重新登录 ")]),default:s(()=>[p(" 登录失败！ ")]),_:1})):j("",!0),e(R,{ref_key:"loginRef",ref:w,model:r,rules:b,class:"form-container"},{default:s(()=>[e(u,{prop:"username"},{default:s(()=>[e(k,{prefix:"ios-contact",size:"large",clearable:"",modelValue:r.username,"onUpdate:modelValue":o[0]||(o[0]=c=>r.username=c),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:s(()=>[e(k,{prefix:"ios-lock",type:"password",password:"",size:"large",modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=c=>r.password=c),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(u,null,{default:s(()=>[t("div",W,[e(q,{modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=c=>h.value=c)},{default:s(()=>[p("记住密码")]),_:1},8,["modelValue"]),X])]),_:1}),e(u,null,{default:s(()=>[e(z,{type:"primary",loading:d.value,onClick:V,long:"",size:"large"},{default:s(()=>[p(K(d.value?"登录中..":"登录"),1)]),_:1},8,["loading"])]),_:1}),e(u,null,{default:s(()=>[e(E,null,{default:s(()=>[p("其他登录方式")]),_:1}),t("div",Y,[t("div",Z,[e(f,{type:"qq",size:35}),$]),t("div",ee,[e(f,{type:"wechat",size:35}),oe]),t("div",te,[e(f,{type:"weibo",size:35}),se])])]),_:1})]),_:1},8,["model","rules"])])])}}},ae=F(le,[["__scopeId","data-v-7a457451"]]);export{ae as default};
