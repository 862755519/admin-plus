import{_ as F,a as L,b as U,r as I,d as _,w as D,e as N,f as M,c as A,g as t,h as T,i as s,j,k as e,v as b,l as a,o as S,m as p,t as K,p as G,n as H}from"./index-875f3fc9.js";const i=m=>(G("data-v-8e5baaf4"),m=m(),H(),m),J={class:"login-container"},O={class:"login-card"},P=i(()=>t("div",{class:"login-title"},"欢迎登录",-1)),Q=i(()=>t("div",{class:"login-text"},"企业级中台管理系统",-1)),W={class:"form-row"},X=i(()=>t("div",null,"没有账号？",-1)),Y={class:"logi-type"},Z={class:"type-item"},$=i(()=>t("div",null,"微信",-1)),ee={class:"type-item"},oe=i(()=>t("div",null,"微信",-1)),te={class:"type-item"},se=i(()=>t("div",null,"微信",-1)),ne={__name:"index",setup(m){const w=L(),B=U(),r=I({username:"admin",password:"123456"}),h=_(null),f=_(!1),C=I({username:[{required:!0,trigger:"blur",validator:(n,o,l)=>{o?l():l(new Error("请输入用户名"))}}],password:[{required:!0,trigger:"blur",validator:(n,o,l)=>{o?l():l(new Error("请输入密码"))}}]}),y=_(!1),d=_(!1),x=_(null),V=n=>{n.keyCode==13&&k()},k=()=>{h.value.validate(n=>{if(n)d.value=!0,B.login(r).then(o=>{const{code:l,message:v}=o;l==200?(b.Message.success("登录成功正在跳转"),setTimeout(()=>{d.value=!1,f.value=!1,w.push({path:x.value||"/"})},300)):(b.Message.error(v||"登录失败"),f.value=!0)}).catch(()=>{});else return d.value=!1,!1})};return D(()=>w.currentRoute.value,n=>{x.value=n.query&&n.query.redirect},{immediate:!0,deep:!0}),N(()=>{window.addEventListener("keydown",V)}),M(()=>{window.removeEventListener("keydown",V,!1)}),(n,o)=>{const l=a("Alert"),v=a("Input"),u=a("FormItem"),q=a("Checkbox"),z=a("Button"),E=a("Divider"),g=a("SvgIcon"),R=a("Form");return S(),A("div",J,[t("div",O,[P,Q,f.value?(S(),T(l,{key:0,type:"error","show-icon":"",style:{"margin-top":"20px","text-align":"left"}},{desc:s(()=>[p(" 账号或密码错误，请重新登录！ ")]),default:s(()=>[p(" 登录失败！ ")]),_:1})):j("",!0),e(R,{ref_key:"loginRef",ref:h,model:r,rules:C,class:"form-container"},{default:s(()=>[e(u,{prop:"username"},{default:s(()=>[e(v,{prefix:"ios-contact",size:"large",clearable:"",modelValue:r.username,"onUpdate:modelValue":o[0]||(o[0]=c=>r.username=c),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:s(()=>[e(v,{prefix:"ios-lock",type:"password",password:"",size:"large",modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=c=>r.password=c),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(u,null,{default:s(()=>[t("div",W,[e(q,{modelValue:y.value,"onUpdate:modelValue":o[2]||(o[2]=c=>y.value=c)},{default:s(()=>[p("记住密码")]),_:1},8,["modelValue"]),X])]),_:1}),e(u,null,{default:s(()=>[e(z,{type:"primary",loading:d.value,onClick:k,long:"",size:"large"},{default:s(()=>[p(K(d.value?"登录中..":"登录"),1)]),_:1},8,["loading"])]),_:1}),e(u,null,{default:s(()=>[e(E,null,{default:s(()=>[p("其他登录方式")]),_:1}),t("div",Y,[t("div",Z,[e(g,{type:"qq",size:35}),$]),t("div",ee,[e(g,{type:"wechat",size:35}),oe]),t("div",te,[e(g,{type:"weibo",size:35}),se])])]),_:1})]),_:1},8,["model","rules"])])])}}},ae=F(ne,[["__scopeId","data-v-8e5baaf4"]]);export{ae as default};
